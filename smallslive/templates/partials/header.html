{% load static from staticfiles %}

<header class="main-header hidden-xs hidden-sm">
  <div class="flex-row items-center wrap content-space-around">
    <div class="flex-row items-center wrap logo-container">
      <div>
        <a href="/" class="smalls-logo">
          <img src="{% static 'logo-black.svg' %}" alt=""/>
        </a>
      </div>
      <form class="search-input" action="{% url 'search' %}">
        <input id="desktop-search-bar" name="q" type="text" placeholder="SEARCH" autocomplete="off">
      </form>
      <div class="search-bar-autocomplete-container"></div>
    </div>

    <div class="button-row">
      <a href="{% url 'schedule' %}"><button class="no-border {% if request.resolver_match.url_name == 'schedule' %}active{% endif %}">Calendar</button></a>
      <a href="{% url 'search' %}"><button class="no-border  {% if request.resolver_match.url_name == 'search' %}active{% endif %}">Archive</button></a>
      <a href="{% url 'contact-and-info' %}"><button class="no-border {% if request.resolver_match.url_name == 'contact-and-info' %}active{% endif %}">Info</button></a>
      <a href=""><button class="no-border">Education</button></a>
      <a href="{% url "promotions:home" %}"><button class="no-border">Store</button></a>
    </div>
    {% if not request.user.is_authenticated %}
      <button class="white-border-button sign-in-button" href="#logIn" data-toggle="modal">
        Sign In
      </button>
    {% else %}
      <div class="user-menu white-border-select no-arrow">
        <select id="userMenu">
          <option value="current" noSelect="1" selected="selected">
            {% if request.user.first_name or request.user.last_name%}
              {% if request.user.first_name %}{{ request.user.first_name }}{% endif %}
              {% if request.user.last_name %} {{ request.user.last_name }}{% endif %}
            {% else %}
              {{ request.user.email }}
            {% endif %}
          </option>
            {% if request.user.artist %}
                <option value="artist_dashboard">Artist Dashboard</option>
            {% endif %}
            <option value="account_info">Account</option>
          <option value="logout">Sign Out</option>
        </select>
      </div>
    {% endif %}
  </div>
</header>


<header class="mobile-header visible-xs visible-sm">
  <div class="mobile-logo-container">
    <a href="/" class="smalls-logo">
      <img src="{% static 'logo-black.svg' %}"  alt=""/>
    </a>
  </div>
  <div class="mobile-menu-icons flex-row items-center content-space-between">
    <i class="fa fa-bars" onclick="toggleSideBar()"></i>
    <div>
      <i class="fa fa-search" onclick="toggleSearch()"></i>
      <i class="fa fa-user" onclick="console.log('user')"></i>
    </div>
  </div>
</header>

<div id="search-bar" class="mobile-search-header visible-xs visible-sm">
  <span class="search-triangle"></span>
  <div class="mobile-search-container flex-row items-center">
    <form id="headerSearchForm" action="{% url 'search' %}">
      <input name="q" type="text" autocomplete="off">
    </form>
    <i id="searchArrow" class="fa fa-arrow-right"></i>
  </div>
</div>
<div class="search-bar-autocomplete-container"></div>

<div id="side-navigation" class="side-bar-container visible-sm visible-xs side-bar-hidden">
  <div class="side-navigation-overlay" onclick="toggleSideBar()"></div>
  <div class="side-bar">
    <div class="side-bar-header flex-row">
      <a href="/">
        <img src="{% static 'logo-black.svg' %}" alt=""/>
      </a>
    </div>
    <div class="flex-column text2">
      <a href="{% url 'home' %}" class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">Home</a>
      {% if request.user.artist %}
        <a href="{% url 'artist_dashboard:my_past_events' %}" class="{% if request.resolver_match.url_name == 'my_past_events' %}active{% endif %}">My dashboard</a>
      {% endif %}
      <a href="{% url 'schedule' %}" class="{% if request.resolver_match.url_name == 'schedule' %}active{% endif %}">Calendar</a>
      <a href="{% url 'search' %}" class="{% if request.resolver_match.url_name == 'search' %}active{% endif %}">Archive</a>
      <a href="{% url 'contact-and-info' %}" class="{% if request.resolver_match.url_name == 'contact-and-info' %}active{% endif %}">Info</a>
      <a href="">Education</a>
      <a href="{% url "promotions:home" %}">Store</a>
    </div>
  </div>
</div>
<script>
  function toggleSideBar() {
      $('#side-navigation').toggleClass('side-bar-hidden');
  }

  function toggleSearch() {
      $('#search-bar').toggleClass('mobile-search-header-shown');
      $('.main-container').toggleClass('mobile-search-header-shown');
  }

  $(document).ready(function () {
     $('#searchArrow').on('click', function () {
         $('#headerSearchForm').submit();
     });
  });

  $(document).ready(function () {
      var searchTerm = getUrlParameter("q");
      if (searchTerm) {
          searchTerm = searchTerm.replace(/\+/g, ' ');
      } else {
          searchTerm = '';
      }

      if (searchTerm) {
        toggleSearch();
      }
  })

</script>
<script type="text/javascript" src="{% static 'js/search/search-bar.js' %}"></script>
